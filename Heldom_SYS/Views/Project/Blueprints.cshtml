@* stylesheet *@
<link rel="stylesheet" href="~/css/Project/Blueprints.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/Project/Issues.css" asp-append-version="true" />

 @* https://localhost:7142/Project/Blueprints *@

<div class="main_wrap">
    <div class="container">
        <div class="mb-4" data-wow-delay="0.1s" style="max-width: 600px;">
            <div class="top_area">
                <h4 class="db-title-l">結構工程圖 @ViewBag.cID @ViewBag.cName</h4>
                <button id="unusualPopupButton" class="button button_style bold">新增</button>
            </div>
        </div>

        <div class="row g-4">
           

            @* 動態生成  *@
             @* --------------------------------- *@
            @if (Model != null && Model.Any())
            {
                @foreach (var blueprint in Model)
                {
                     <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s"> 
                         <div class="service-item bg-light rounded h-100 p-5"> 
                             <div class="d-inline-flex align-items-center justify-content-center bg-white rounded-circle mb-4">
                                 <img src="/img/bunch-blueprints.jpg" class="img-fluid" style="max-width: 100%; height: auto;"> 
                             </div> 
                             <div class="container"> 
                                 <div class="flex-row"> 
                                     <p class="mb-4 info-title">圖紙名稱</p> 
                                     <p class="mb-4 info-txt">@blueprint.Name</p> 
                                 </div> 

                                 <div class="flex-row"> 
                                     <p class="mb-4 info-title">負責人員</p> 
                                     <p class="mb-4 info-txt">@blueprint.Manager</p> 
                                 </div> 

                                 <div class="flex-row"> 
                                     <p class="mb-4 info-title">版本號碼</p> 
                                     <p class="mb-4 info-txt">@blueprint.Version</p> 
                                 </div> 

                                 <div class="flex-row"> 
                                     <p class="mb-4 info-title">上傳日期</p> 
                                     <p class="mb-4 info-txt">@blueprint.UploadDate</p> 
                                 </div> 
                             </div> 
                         </div> 
                     </div> 
                 } 
             } 
             else 
             { 
                 <p class="text-center">目前沒有可用的圖紙資料</p> 
             } 
            @* --------------------------------- *@

            <div class="end_area obj-center">


        </div>
    </div>
</div>

<script>
        //分頁生成
        // 每頁顯示的圖紙數量
        let itemsPerPage = 9;
        // 計算總頁數（向上取整，確保所有圖紙都能被分頁）
        let trackPageCount = Math.ceil($(".row .col-lg-4").length / itemsPerPage);
        // 確保 `.end_area` 存在後再生成分頁按鈕
        if ($(".end_area").length) {
            $(".end_area").append(`<h4><i class="fas fa-angle-left"></i></h4>`);

            for (let i = 0; i < trackPageCount; i++) {
                $(".end_area").append(`
                    <div class="page_circle obj-center">
                        <p class="bold">${i + 1}</p>
                    </div>
                `);
            }

            $(".end_area").append(`<h4><i class="fas fa-angle-right"></i></h4>`);
        }

        // 新增圖紙
        $("#unusualPopupButton").on("click", function(e) {
            location.href='/Project/Blueprints?type=Unusual&id=123&motion=add'
        });


</script>

